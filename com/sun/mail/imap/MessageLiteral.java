package com.sun.mail.imap;

import com.sun.mail.iap.Literal;
import com.sun.mail.util.CRLFOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import javax.mail.Message;
import javax.mail.MessagingException;





































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class MessageLiteral
  implements Literal
{
  private Message msg;
  private int msgSize = -1;
  private byte[] buf;
  
  public MessageLiteral(Message paramMessage, int paramInt) throws MessagingException, IOException
  {
    msg = paramMessage;
    
    LengthCounter localLengthCounter = new LengthCounter(paramInt);
    CRLFOutputStream localCRLFOutputStream = new CRLFOutputStream(localLengthCounter);
    paramMessage.writeTo(localCRLFOutputStream);
    localCRLFOutputStream.flush();
    msgSize = localLengthCounter.getSize();
    buf = localLengthCounter.getBytes();
  }
  
  public int size() {
    return msgSize;
  }
  
  public void writeTo(OutputStream paramOutputStream) throws IOException
  {
    try {
      if (buf != null) {
        paramOutputStream.write(buf, 0, msgSize);
      } else {
        paramOutputStream = new CRLFOutputStream(paramOutputStream);
        msg.writeTo(paramOutputStream);return;
      }
    }
    catch (MessagingException localMessagingException)
    {
      throw new IOException("MessagingException while appending message: " + 
        localMessagingException);
    }
  }
}
