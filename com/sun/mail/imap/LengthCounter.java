package com.sun.mail.imap;

import java.io.IOException;
import java.io.OutputStream;



















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































class LengthCounter
  extends OutputStream
{
  private int size;
  private byte[] buf;
  private int maxsize;
  
  public LengthCounter(int paramInt)
  {
    buf = new byte['â€€'];
    maxsize = paramInt;
  }
  
  public void write(int paramInt) {
    int i = size + 1;
    if (buf != null) {
      if ((i > maxsize) && (maxsize >= 0)) {
        buf = null;
      } else if (i > buf.length) {
        byte[] arrayOfByte = new byte[Math.max(buf.length << 1, i)];
        System.arraycopy(buf, 0, arrayOfByte, 0, size);
        buf = arrayOfByte;
        buf[size] = ((byte)paramInt);
      } else {
        buf[size] = ((byte)paramInt);
      }
    }
    size = i;
  }
  
  public void write(byte[] paramArrayOfByte, int paramInt1, int paramInt2) {
    if ((paramInt1 < 0) || (paramInt1 > paramArrayOfByte.length) || (paramInt2 < 0) || 
      (paramInt1 + paramInt2 > paramArrayOfByte.length) || (paramInt1 + paramInt2 < 0))
      throw new IndexOutOfBoundsException();
    if (paramInt2 == 0) {
      return;
    }
    int i = size + paramInt2;
    if (buf != null) {
      if ((i > maxsize) && (maxsize >= 0)) {
        buf = null;
      } else if (i > buf.length) {
        byte[] arrayOfByte = new byte[Math.max(buf.length << 1, i)];
        System.arraycopy(buf, 0, arrayOfByte, 0, size);
        buf = arrayOfByte;
        System.arraycopy(paramArrayOfByte, paramInt1, buf, size, paramInt2);
      } else {
        System.arraycopy(paramArrayOfByte, paramInt1, buf, size, paramInt2);
      }
    }
    size = i;
  }
  
  public void write(byte[] paramArrayOfByte) throws IOException {
    write(paramArrayOfByte, 0, paramArrayOfByte.length);
  }
  
  public int getSize() {
    return size;
  }
  
  public byte[] getBytes() {
    return buf;
  }
}
